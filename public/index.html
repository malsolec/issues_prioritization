<!doctype html>

<html ng-app="issuesBoard">
<head>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="//cdn.muicss.com/mui-0.5.9/css/mui.min.css" rel="stylesheet" type="text/css" />
	<script src="//cdn.muicss.com/mui-0.5.9/angular/mui-angular.min.js"></script>
	<link rel="stylesheet" href="style.css">
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.16/angular.min.js"></script>
	<script src="bower_components/ngDraggable/ngDraggable.js"></script>
	<script src="controllers/issueController.js"></script>
	<script src="services/issueService.js"></script>
	<script src="services/projectService.js"></script>
	<script src="core.js"></script>


</head>
<body >
	<div ng-controller="issueController">


			<div class="mui-appbar">
				<table width="100%">
					<tr style="vertical-align:middle;">
						<td class="mui--appbar-height">
							<h1>
							{{selectedProject}}
							</h1>
						</td>
						<td class="mui--appbar-height" align="right">
							<label>Choose project:
								<select class="mui-dropdown" ng-options="project.alias for project in projects" ng-model="selectedItem" ng-change="update()" >
								</select>
							</label>
							<button class="mui-btn mui-btn--fab mui-btn--primary" ng-mogel="ifAdd" ng-click="add()">Add</button>
						</td>
					</tr>
				</table>
			</div>

		<div class="check-element animate-show" ng-show="ifError">
			<div class="mui-container">
				<div class="mui-row">
						<div class="mui-col-md-11">
							<h2>{{error}}</h2>
						</div>
					<div class="mui-col-md-1">
						<button class="mui-btn mui-btn--fab mui-btn--primary" ng-model="ifError" ng-click="closeError()">X</button>
						</div>
				</div>
			</div>
		</div>

		<div class="check-element animate-show" ng-show="ifAdd">
			<div class="mui-container">
				<div class="mui-row">
					<form class="mui-form--inline">
						<label>Github api url:
						<div class="mui-textfield">
							<input type="text" class="form-control input-lg text-center" ng-model="formData.text">
						</div></label>
						<button type="submit" class="mui-btn mui-btn--primary" ng-click="sync()">Add project</button>
					</form>
				</div>
			</div>
		</div>

		<div class="mui-container">

			<div class="mui-row" ng-show="ifNewIssuesAre">

				<div class="undone-issues">
					<h1>
						New issues
					</h1>
					<ul>
						<li ng-repeat="issue in issues">
							<div class="issue" ng-drag="true" ng-drag-data="issue" data-allow-transform="true"  ng-drag-success="onDragUndoneSuccess($data,$event)">
								{{issue.title}}
							</div>
						</li>
					</ul>
				</div>
			</div>

			<div class="mui-row">

				<div class="prioritized-issues">
					<div class="mui-col-md-4">
						<div class="mui-container">
							<div class="mui-row priority-header">
								<h1>High priority</h1>
							</div>
							<div class="mui-row done-issues high" ng-drop="true" ng-drop-success="onDropInHighPriorityComplete($data,$event)">
								<div class="issue" ng-repeat="highIssue in highIssues" ng-drag="true" ng-drag-data="highIssue" ng-drag-success="onDragInHighPrioritySuccess($data,$event)">
									{{highIssue.title}}
								</div>
							</div>
						</div>
					</div>
					<div class="mui-col-md-4">
						<div class="mui-container">
							<div class="mui-row priority-header">
								<h1>Medium priority</h1>
							</div>
							<div class="mui-row done-issues mid" ng-drop="true" ng-drop-success="onDropInMidPriorityComplete($data,$event)">
								<div class="issue" ng-repeat="midIssue in midIssues" ng-drag="true" ng-drag-data="midIssue" ng-drag-success="onDragInMidPrioritySuccess($data,$event)">
									{{midIssue.title}}
								</div>
							</div>
						</div>
					</div>
					<div class="mui-col-md-4">
						<div class="mui-container">
							<div class="mui-row priority-header">
								<h1>Low priority</h1>
							</div>
							<div class="mui-row done-issues low" ng-drop="true" ng-drop-success="onDropInLowPriorityComplete($data,$event)">
								<div class="issue" ng-repeat="lowIssue in lowIssues" ng-drag="true" ng-drag-data="lowIssue" ng-drag-success="onDragInLowPrioritySuccess($data,$event)">
									{{lowIssue.title}}
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

		</div>
	</div>
</body>
</html>
